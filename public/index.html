<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Socket Test</title>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
	<script src="http://localhost:3000/socket.io/socket.io.js"></script>
	<script type="text/javascript" charset="utf-8">
		$(document).ready(function () {
			var log_chat_message = function  (message) {
				var li = $('<li />').text(message);
				$('#chat_log').append(li);
			};

			var socket = io.connect('http://localhost:3000');

			socket.on('entrance', function  (data) {
				log_chat_message(data.message);
			});

			socket.on('exit', function  (data) {
				log_chat_message(data.message);
			});

			socket.on('chat', function  (data) {
				log_chat_message(data.message);
			});

			$('#chat_box').keypress(function (event) {
				if (event.which == 13) {
					socket.emit('chat', {message: $('#chat_box').val()});
					$('#chat_box').val('');
				}
			});
		});
	</script>

	<style type="text/css" media="screen">
	div#chatroom {
		display: block;
		height: 300px;
		border: 1px solid #999;
		overflow: auto;
		width: 100%;
		margin-bottom: 10px;
		position: relative;
	}

	ul#chat_log {
		list-style: none;
		position: absolute;
		bottom: 0px;
	}

	input#chat_box {
		width: 99%;
	}
</style>

</head>
<body>


	<div id="chatroom">
		<ul id="chat_log">
		</ul>
	</div>

	<input type="text" name="chat_box" value="" id="chat_box" placeholder="type to chat..." />

</body>
</html>